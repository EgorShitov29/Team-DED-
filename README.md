# Автобой на основе компьютерного зрения для Genshin Impact

## Описание проекта

Проект представляет собой автоматизированного бота для автоматизации прохождения подземелий игры Genshin Impact, использующего методы компьютерного зрения для анализа данных с экрана и выполнения игровых действий. Бот предназначен для автоматизации боевых сценариев, фарминга ресурсов и выполнения повседневных заданий без необходимости ручного управления персонажами.

Основная идея — захват экрана с игрой в реальном времени, распознавание ключевых элементов интерфейса (враги, здоровье, способности, элементы окружения) и принятие решений на основе шаблонного сопоставления и анализа пикселей. Проект разработан и оптимизирован для стабильной работы на Windows-системах с запуском через единый входной скрипт `main.py`.

> Автоматизация боевых действий позволяет игрокам экономить время на рутинных процессах, минимизируя вмешательство человека.

## Основной функционал

Бот реализует полный цикл автоматизации боевых действий:

- **Распознавание экрана**: Захватывает области экрана игры с помощью библиотек для скриншотов и поиска шаблонов (template matching). Определяет наличие врагов, индикаторы здоровья, кулдауны способностей и позиции персонажей.
- **Автоматическая навигация**: Перемещает персонажа к ближайшим целям, избегая препятствий на основе анализа карты мини-карты и контуров окружения.
- **Боевая логика**: Выбирает оптимальную последовательность атак — обычные атаки, элементальные навыки и ультимейты.
- **Фарминг**: Поддерживает цикл боевки и фарминга с возможностью остановки процесса пользователем для безопасности

Дополнительные возможности:

- Логирование всех действий в файл для отладки.
- Поддержка нескольких разрешений экрана (1920x1080 по умолчанию).


## Требования и установка

### Системные требования

- ОС: Windows 10/11 (64-bit), Linux (протокол X11).
- Python: 3.9+.
- Разрешение экрана: 1920x1080 (полноэкранный режим Genshin Impact).
- Игра: Genshin Impact (последняя стабильная версия, launcher закрыт).


### Зависимости

Основные библиотеки:

```
tk==0.1.0
opencv-python==4.12.0.88
easyocr==1.7.2
numpy==2.2.6
pillow==12.0.0
PyAutoGUI==0.9.54
ultralytics==8.3.230
```

Установить остальные зависимости можно командой:

```
pip install -r requirements.txt
```

### Подготовка игры

1. Запустите main.py при помощи команды "python3 main.py"
2. Запустите Genshin Impact в полноэкранном режиме (на Windows - просто .exe файл, На Linux - через Portproton или любой другой эмулятор)
3. Перейдите в мир (не в меню).
4. Убедитесь, что бот имеет права администратора для эмуляции ввода.

## Запуск

Основной скрипт — `main.py`. Запускайте его напрямую:

```
python main.py
```


### Аргументы командной строки

```
python main.py --profile ru --farm_mode boss --duration 3600
```

## Структура проекта

```
├── main.py
├── README.md
├── requirements.txt
├── Model/
│   ├── detection/
│   │   └── detection_files
│   ├── gameplay_and_keyboard_core/
│   │   └── core_files
│   ├── utils/
│   │   └── utils_files
│   └── state_check/
│       └── state_check_files
├── View/
│   └── Interface
├── ViewModel/
        VM.py
        DataStreamer.py
├── Resources/   
```

## Предупреждения

- Используйте на свой страх и риск: miHoYo может банить за ботов.
- Не оставляйте без присмотра.
- Проект для образовательных целей.

Для вопросов обращайтесь в Issues репозитория.

